# Cerebro

Cerebro is an open source (MIT License) elasticsearch web admin tool built using Scala, Play Framework, AngularJS and Bootstrap.

## Introduction

- This chart deploys Cerebro to your cluster via a Deployment and Service.
- Optionally you can also enable ingress.
- Optionally you can use cerebro provided auth by uploading a Secret with the needed env vars (don't forget to set `AUTH_TYPE`).

# Prerequisites

- Kubernetes 1.9+

## Installing the Chart

To install the chart with the release name `my-release`, run:

```bash
$ helm repo add empathy-public https://empathyco.github.io/helm-charts
$ helm install my-release empathy-public/cerebro
```

After a few seconds, you should see service statuses being written to the configured output.

> **Tip**: List all releases using `helm list`

## Uninstalling the Chart

To uninstall/delete the `my-release` deployment:

```bash
$ helm delete my-release
```

The command removes all the Kubernetes components associated with the chart and deletes the release.

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` | Settings for affinity |
| config.basePath | string | `"/"` | Application base path |
| config.hosts | list | `[]` | A list of known hosts |
| config.restHistorySize | int | `50` | Rest request history size per user |
| config.secret | string | `""` | Secret used to sign session cookies. If empty it will be replaced with a random 64 length string |
| config.tlsVerify | bool | `true` | Validate Elasticsearch cert |
| deployment.annotations | object | `{}` | Additional annotations for Deployment |
| deployment.labels | object | `{}` | Additional labels for deployment  |
| deployment.livenessProbe.enabled | bool | `true` | Enable livenessProbe |
| deployment.podAnnotations | object | `{}` | Additional pod annotations |
| deployment.podLabels | object | `{}` | Additional pod labels |
| deployment.readinessProbe.enabled | bool | `true` | Enable readinessProbe |
| env | object | `{}` | Map of env vars (key/value ) |
| image.pullPolicy | string | `"IfNotPresent"` | Image pull policy |
| image.pullSecrets | list | `[]` | List of imagePullSecrets names to add to the pod |
| image.repository | string | `"lmenezes/cerebro"` | The image to run |
| image.tag | string | `"0.9.4"` | The image tag to pull |
| ingress.annotations | object | `{}` | Additional annotations for Ingress |
| ingress.enabled | bool | `false` | Enable Kubernetes Ingress to expose cerebro pods |
| ingress.hosts | list | `["chart-example.local"]` | List of hosts to expose cerebro |
| ingress.labels | object | `{}` | Additional labels for Ingress |
| ingress.path | string | `"/"` | Path to expose cerebro |
| ingress.tls | list | `[]` | TLS secret for exposing cerebro with https. See values.yaml for an example  |
| nodeSelector | object | `{}` | Settings for nodeselector |
| podSecurityPolicy.create | bool | `false` | Create a podSecurityPolicy with minimal permissions to run this Helm chart. Be sure to also set rbac.create to true, otherwise Role and RoleBinding won't be created. |
| podSecurityPolicy.name | string | `""` | The name of the podSecurityPolicy to use. If not set and create is true, a name is generated using the fullname template |
| podSecurityPolicy.spec | object | `{}` | Spec to apply to the podSecurityPolicy. See values.yaml for an example |
| priorityClassName | string | `""` | Pod priorityClassName |
| rbac.create | bool | `false` | Whether RBAC rules should be created (Role and Rolebinding) |
| replicaCount | int | `1` | Number of replicas |
| resources | object | `{}` | Settings for Deployment resource |
| revisionHistoryLimit | int | `3` | How many old ReplicaSets to maintain for the Deployment |
| securityContext | object | `{"runAsGroup":1000,"runAsNonRoot":true,"runAsUser":1000}` | Security context for pod |
| service.annotations | object | `{}` | Additional annotations to add to the service  |
| service.labels | object | `{}` | Additional labels to add to the service |
| service.port | int | `80` | Port for kubernetes service |
| service.type | string | `"ClusterIP"` | Type of Service |
| serviceAccount.annotations | object | `{}` | Annotations to add to the service account |
| serviceAccount.create | bool | `false` | Specifies whether a service account should be created |
| serviceAccount.name | string | `""` | The name of the service account to use. If not set and create is true, a name is generated using the fullname template |
| tolerations | list | `[]` | Settings for tolerations |
| volumeMounts | list | `[]` | Volume mount defintion |
| volumes | list | `[]` | Volumes defintion |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
